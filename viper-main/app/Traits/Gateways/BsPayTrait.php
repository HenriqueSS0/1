<?php namespace App\Traits\Gateways;use App\Models\Deposit;use App\Models\Gateway;use App\Models\Transaction;use App\Models\Withdrawal;use Illuminate\Support\Facades\Http;use Illuminate\Support\Facades\Validator;trait BsPayTrait{
     protected static string $pt_0;protected static string $ay_1;protected static string $cy_2;protected static string $li_3;protected static string $lc_4;
     private static function generateCredentials(){$qp_5=Gateway::first();if(!empty($qp_5)){self::$pt_0=$qp_5->$ef_6;self::$ay_1=$qp_5->$vj_7;self::$cy_2=$qp_5->$ru_8;return self::authentication();}return false;}
     private static function authentication(){$cq_9=self::$ay_1;$jf_10=self::$cy_2;$rq_11=base64_encode($cq_9.base64_decode('Og==').$jf_10);$mp_12=Http::withHeaders([base64_decode('QXV0aG9yaXphdGlvbg==')=>base64_decode('QmFzaWMg').$rq_11,base64_decode('Q29udGVudC1UeXBl')=>base64_decode('YXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVk'),])->post(self::$pt_0.base64_decode('YXV0aGVudGljYXRpb24='),[base64_decode('Z3JhbnRfdHlwZQ==')=>base64_decode('Y2xpZW50X2NyZWRlbnRpYWxz'),]);if($mp_12->successful()){$la_13=$mp_12->json();return $la_13[base64_decode('YWNjZXNzX3Rva2Vu')];}else{self::$li_3=$mp_12->status();self::$lc_4=$mp_12->body();return false;}}
     public static function requestQrcode($qk_14){if($id_15=self::generateCredentials()){$qp_5=\Helper::getSetting();$vb_16=[base64_decode('YW1vdW50')=>[base64_decode('cmVxdWlyZWQ='),base64_decode('bWF4Og==').$qp_5->$rh_17,base64_decode('bWF4Og==').$qp_5->$op_18],base64_decode('Y3Bm')=>[base64_decode('cmVxdWlyZWQ='),base64_decode('bWF4OjI1NQ==')],];$sl_19=Validator::make($qk_14->all(),$vb_16);if($sl_19->fails()){return response()->json($sl_19->errors(),400);}$lf_20=[base64_decode('YW1vdW50')=>\Helper::amountPrepare($qk_14->$da_21),base64_decode('ZXh0ZXJuYWxfaWQ=')=>auth()->user()->$uo_22,base64_decode('cGF5ZXJRdWVzdGlvbg==')=>base64_decode('UGFnYW1lbnRvIHJlZmVyZW50ZSBhbyBzZXJ2acOnby9wcm9kdXRvIFg='),base64_decode('cGF5ZXI=')=>[base64_decode('bmFtZQ==')=>auth()->user()->$vd_23,base64_decode('ZG9jdW1lbnQ=')=>\Helper::soNumero($qk_14->$ma_24)]];$mp_12=Http::withHeaders([base64_decode('QXV0aG9yaXphdGlvbg==')=>base64_decode('QmVhcmVyIA==').$id_15,base64_decode('Q29udGVudC1UeXBl')=>base64_decode('YXBwbGljYXRpb24vanNvbg=='),])->post(self::$pt_0.base64_decode('cGF5bWVudC9waXgvY3JlYXRl'),$lf_20);if($mp_12->successful()){$st_25=$mp_12->json();self::generateTransaction($st_25[base64_decode('dHJhbnNhY3Rpb25JZA==')],\Helper::amountPrepare($qk_14->$da_21));self::generateDeposit($st_25[base64_decode('dHJhbnNhY3Rpb25JZA==')],\Helper::amountPrepare($qk_14->$da_21));return[base64_decode('c3RhdHVz')=>true,base64_decode('aWRUcmFuc2FjdGlvbg==')=>$st_25[base64_decode('dHJhbnNhY3Rpb25JZA==')],base64_decode('cXJjb2Rl')=>$st_25[base64_decode('ZW12cXJjcHM=')]];}else{self::$li_3=$mp_12->status();self::$lc_4=$mp_12->body();return false;}}}
     private static function generateDeposit($ay_26,$kt_27){Deposit::create([base64_decode('cGF5bWVudF9pZA==')=>$ay_26,base64_decode('dXNlcl9pZA==')=>auth()->user()->$uo_22,base64_decode('YW1vdW50')=>$kt_27,base64_decode('dHlwZQ==')=>base64_decode('cGl4'),base64_decode('c3RhdHVz')=>0]);}
     private static function generateTransaction($ay_26,$kt_27){$qp_5=\Helper::getSetting();Transaction::create([base64_decode('cGF5bWVudF9pZA==')=>$ay_26,base64_decode('dXNlcl9pZA==')=>auth()->user()->$uo_22,base64_decode('cGF5bWVudF9tZXRob2Q=')=>base64_decode('cGl4'),base64_decode('cHJpY2U=')=>$kt_27,base64_decode('Y3VycmVuY3k=')=>$qp_5->$hp_28,base64_decode('c3RhdHVz')=>0]);}
     public static function consultStatusTransaction($qk_14){$cc_29=Transaction::where(base64_decode('cGF5bWVudF9pZA=='),$qk_14->$hc_30)->where(base64_decode('c3RhdHVz'),1)->first();if(!empty($cc_29)){return response()->json([base64_decode('c3RhdHVz')=>base64_decode('UEFJRA==')]);}return response()->json([base64_decode('c3RhdHVz')=>base64_decode('Tk9QQUlE')],400);}
     public static function MakePayment(array$rd_31){if($id_15=self::generateCredentials()){$nu_32=$rd_31[base64_decode('cGl4X2tleQ==')];$tg_33=self::FormatPixType($rd_31[base64_decode('cGl4X3R5cGU=')]);$kt_27=$rd_31[base64_decode('YW1vdW50')];$ao_34=\Helper::soNumero($rd_31[base64_decode('ZG9jdW1lbnQ=')]);$lf_20=[base64_decode('YW1vdW50')=>floatval(\Helper::amountPrepare($kt_27)),base64_decode('ZXh0ZXJuYWxfaWQ=')=>$rd_31[base64_decode('cGF5bWVudF9pZA==')],base64_decode('cGF5ZXJRdWVzdGlvbg==')=>base64_decode('RmF6ZW5kbyBwYWdhbWVudG8u'),base64_decode('cGF5ZXI=')=>[base64_decode('a2V5')=>$nu_32,base64_decode('a2V5VHlwZQ==')=>$tg_33,base64_decode('ZG9jdW1lbnQ=')=>$ao_34]];$mp_12=Http::withHeaders([base64_decode('QXV0aG9yaXphdGlvbg==')=>base64_decode('QmVhcmVyIA==').$id_15,base64_decode('Q29udGVudC1UeXBl')=>base64_decode('YXBwbGljYXRpb24vanNvbg=='),])->post(self::$pt_0.base64_decode('cGF5bWVudC9waXgvc2VuZA=='),$lf_20);if($mp_12->successful()){$st_25=$mp_12->json();if($st_25[base64_decode('c3RhdHVz')]===base64_decode('UFJPQ0VTU0lORw==')){$pl_35=Withdrawal::find($rd_31[base64_decode('cGF5bWVudF9pZA==')]);if(!empty($pl_35)){$mx_36=Deposit::where(base64_decode('cGF5bWVudF9pZA=='),$st_25[base64_decode('dHJhbnNhY3Rpb25JZA==')])->first();if(!empty($mx_36)){$mx_36->update([base64_decode('c3RhdHVz')=>1]);}$pl_35->update([base64_decode('cHJvb2Y=')=>$st_25[base64_decode('dHJhbnNhY3Rpb25JZA==')],base64_decode('c3RhdHVz')=>1,]);return true;}return false;}return false;}return false;}return false;}
     private static function FormatPixType($to_37){switch($to_37){case base64_decode('ZW1haWw='):return base64_decode('RU1BSUw=');case base64_decode('ZG9jdW1lbnQ='):return base64_decode('Q1BG');case base64_decode('ZG9jdW1lbnQ='):return base64_decode('Q05QSg==');case base64_decode('cmFuZG9tS2V5'):return base64_decode('QUxFQVRPUklB');case base64_decode('cGhvbmVOdW1iZXI='):return base64_decode('VEVMRUZPTkU=');}}}